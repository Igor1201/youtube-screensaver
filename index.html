<!DOCTYPE html>
<html>
  <head>
    <title>YouTube ScreenSaver</title>
  </head>
  <body style="margin:0;height:100vh;background-color:#000;">
    <div id="player"></div>

    <script>
      var videoIds = [], player = null;

      function onError() {
        player.nextVideo();
      }

      function playVideo() {
        if (player && videoIds.length > 0) {
          player.loadPlaylist(videoIds, 240, 'hd1080');
          player.mute();
          player.playVideo();
        }
      }

      window.onGapiReady = function() {
        var keywordList = ['agdq', 'tasvideos']; // 'speedrun'
        var keyword = keywordList[parseInt(Math.random() * keywordList.length)];

        gapi.client.setApiKey('AIzaSyBo3T4qX9vqrQLA5TQ6Y9kaW5guW6aEDTE');
        var restRequest = gapi.client.request({
          path: 'youtube/v3/search',
          params: {
            q: keyword,
            part: 'snippet',
            type: 'video',
            videoEmbeddable: true,
            maxResults: 50
          }
        });

        restRequest.execute(function(resp) {
          if (resp.items) {
            for (var i = 0; i < 5; i++) {
              var index = parseInt(Math.random() * 50);
              videoIds.push(resp.items[index].id.videoId);
            }
            playVideo();
          }
        });
      }

      window.onYouTubeIframeAPIReady = function() {
        player = new YT.Player('player', {
          height: '100%',
          width: '100%',
          playerVars: {
            controls: 1,
            iv_load_policy: 3,
            loop: 1,
            modestbranding: 1,
            rel: 0,
            showinfo: 0
          },
          events: {
            onReady: playVideo,
            onError: onError
          }
        });
      }

      var tag = document.createElement('script');
      tag.src = '//www.youtube.com/iframe_api';
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      tag = document.createElement('script');
      tag.src = '//apis.google.com/js/client.js?onload=onGapiReady';
      firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>
  </body>
</html>
